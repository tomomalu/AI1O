# AIエラー解決機能 - 画面遷移図

## 全体遷移フロー

```
                    システム開始
                         │
                         ▼
               ┌─────────────────────┐
               │  メインダッシュボード │ ◄─┐
               │   (エラー監視画面)   │   │
               └─────────────────────┘   │
                         │                │
                         ▼                │
                  ┌─────────────┐         │
                  │ エラー発生？ │         │
                  └─────────────┘         │
                    │           │         │
                  Yes │         │ No      │
                    │           └─────────┘
                    ▼
               ┌─────────────────────┐
               │   エラー検知通知    │
               │   (ポップアップ)    │
               └─────────────────────┘
                         │
                         ▼
               ┌─────────────────────┐
               │    AI分析開始       │
               │   (プログレス表示)  │
               └─────────────────────┘
                         │
                         ▼
               ┌─────────────────────┐
               │   解決提案画面      │ ◄─┐
               │  (エラー詳細分析)   │   │
               └─────────────────────┘   │
                         │                │
                         ▼                │
               ┌─────────────────────┐   │
               │   解決方法選択      │   │
               └─────────────────────┘   │
                 │       │       │       │
          自動修復 │    手動修復 │  相談 │  後で │
                 │       │       │       │
                 ▼       ▼       ▼       │
        ┌─────────┐ ┌────────┐ ┌────────┐ │
        │自動修復  │ │手動修復│ │サポート│ │
        │実行画面  │ │ガイド  │ │  画面  │ │
        └─────────┘ └────────┘ └────────┘ │
                 │       │       │       │
                 ▼       ▼       ▼       │
        ┌─────────────────────────────────┐ │
        │         修復完了確認画面        │ │
        └─────────────────────────────────┘ │
                         │                │
                         ▼                │
               ┌─────────────────────┐   │
               │    履歴画面         │   │
               │  (オプション)       │   │
               └─────────────────────┘   │
                         │                │
                         └────────────────┘
```

## 詳細画面遷移

### 1. エラー検知からAI分析まで
```
┌──────────────────┐    エラー発生    ┌──────────────────┐
│ メインダッシュボード │ ──────────────► │   エラー検知     │
│  - 実行状況監視   │                 │  - 即座に検知    │
│  - エラー統計表示 │                 │  - ユーザー通知  │
└──────────────────┘                 └──────────────────┘
                                             │
                                             ▼
                                   ┌──────────────────┐
                                   │  ポップアップ通知 │
                                   │  - エラー概要    │
                                   │  - 対応選択      │
                                   └──────────────────┘
                                      │           │
                                 すぐ確認 │       │ 後で確認
                                      │           │
                                      ▼           ▼
                                ┌─────────────┐ ┌─────────────┐
                                │ AI分析開始  │ │ 通知を保留  │
                                │ (即座)      │ │ (後で再表示) │
                                └─────────────┘ └─────────────┘
```

### 2. AI分析から解決提案まで
```
┌──────────────────┐         │ 自動実行 │          ┌──────────────────┐
│   AI分析開始     │ ────────────────────────────► │  解決提案画面    │
│  - エラーログ解析 │                              │  - 原因分析結果  │
│  - 画面解析      │                              │  - 解決手順提示  │
│  - 履歴検索      │                              │  - 信頼度表示    │
└──────────────────┘                              └──────────────────┘
         │                                                 │
         ▼                                                 ▼
┌──────────────────┐                              ┌──────────────────┐
│  プログレス表示  │                              │   解決方法選択   │
│  - 分析進捗      │                              │  - 自動修復      │
│  - 推定時間      │                              │  - 手動修復      │
│  - 中止オプション │                              │  - サポート相談  │
└──────────────────┘                              └──────────────────┘
```

### 3. 解決方法選択と実行
```
           解決提案画面
                │
      ┌─────────┼─────────┬─────────┐
      │         │         │         │
   自動修復    手動修復   サポート相談  後で対応
      │         │         │         │
      ▼         ▼         ▼         ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│自動修復  │ │手動修復 │ │サポート │ │ダッシュ │
│実行画面  │ │ガイド画面│ │連絡画面 │ │ボードに│
│         │ │         │ │         │ │戻る     │
└─────────┘ └─────────┘ └─────────┘ └─────────┘
      │         │         │         
      ▼         ▼         ▼         
┌─────────────────────────────────┐
│        修復完了確認画面         │
│  - 実行結果                    │
│  - 成功/失敗の表示             │
│  - 次のアクション選択           │
└─────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────┐
│         後続処理選択            │
│  - ダッシュボードに戻る         │
│  - 履歴を確認                  │
│  - フィードバック送信           │
│  - 修正を元に戻す              │
└─────────────────────────────────┘
```

### 4. 履歴画面への遷移
```
┌──────────────────┐    履歴確認    ┌──────────────────┐
│ メインダッシュボード │ ──────────────► │   履歴一覧画面   │
│  - 履歴リンク     │                 │  - 過去エラー一覧 │
└──────────────────┘                 │  - 統計情報      │
                                     │  - フィルター機能 │
                                     └──────────────────┘
                                             │
                                        詳細確認
                                             ▼
                                   ┌──────────────────┐
                                   │  エラー詳細履歴  │
                                   │  - 実行ログ     │
                                   │  - 解決過程     │
                                   │  - 学習データ   │
                                   └──────────────────┘
```

## エラーハンドリングフロー

### エラー発生時の分岐処理
```
              エラー発生
                  │
                  ▼
           ┌─────────────┐
           │エラー種類判定│
           └─────────────┘
             │      │     │
      軽微エラー│   │重大エラー│ 不明エラー
             │      │     │
             ▼      ▼     ▼
        ┌─────────┐ ┌─────────┐ ┌─────────┐
        │自動修復  │ │手動対応  │ │詳細分析  │
        │可能      │ │必須      │ │が必要    │
        └─────────┘ └─────────┘ └─────────┘
             │      │     │
             ▼      ▼     ▼
        ┌─────────────────────────────────┐
        │        統合解決提案画面         │
        │    (すべてのケースに対応)       │
        └─────────────────────────────────┘
```

### 修復失敗時のフォールバック
```
           自動修復実行
                  │
                  ▼
           ┌─────────────┐
           │  実行結果    │
           │    判定      │
           └─────────────┘
             │        │
          成功 │        │ 失敗
             │        │
             ▼        ▼
        ┌─────────┐ ┌─────────┐
        │完了画面  │ │再試行画面│
        │表示      │ │表示      │
        └─────────┘ └─────────┘
                        │
                        ▼
                 ┌─────────────┐
                 │代替案提示  │
                 │・手動修復  │
                 │・サポート  │
                 │・元に戻す  │
                 └─────────────┘
```

## ユーザー操作フロー

### 初回利用者向け
```
初回ログイン → 機能説明 → エラー発生待機 → ガイド付き解決体験 → 通常利用
     │           │          │              │                │
     ▼           ▼          ▼              ▼                ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐ ┌─────────┐
│チュートリ│ │機能概要  │ │ダッシュ  │ │詳細な手順説明│ │自立運用  │
│アル表示  │ │説明画面  │ │ボード画面│ │付きで解決   │ │開始      │
└─────────┘ └─────────┘ └─────────┘ └─────────────┘ └─────────┘
```

### 経験者向け
```
ログイン → ダッシュボード → エラー監視 → 迅速解決 → 履歴確認
   │          │            │          │        │
   ▼          ▼            ▼          ▼        ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│認証      │ │状況確認  │ │リアルタ │ │ワンクリ │ │統計確認  │
│         │ │         │ │イム監視  │ │ック解決 │ │         │
└─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘
```

## 技術的な画面遷移制御

### 状態管理
- **エラー発生状態**: リアルタイム検知からAI分析完了まで
- **分析中状態**: AI処理中のプログレス表示
- **解決選択状態**: ユーザーの意思決定待ち
- **修復実行状態**: 自動/手動修復の実行中
- **完了状態**: 結果確認とフィードバック

### 画面間データ受け渡し
- エラーID、解決提案内容、実行結果を画面間で継承
- ブラウザの戻るボタンに対応した履歴管理
- セッション管理による作業継続性の確保

## アクセシビリティ考慮事項
- キーボードナビゲーションでの全画面アクセス
- スクリーンリーダー対応のページ構造
- 色以外の方法でも状態を判別可能な設計