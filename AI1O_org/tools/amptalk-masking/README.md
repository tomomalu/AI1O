# 商談文字起こしマスキングツール

商談の音声文字起こしテキストデータから個人情報を自動でマスキングするPythonツールです。

## 概要

このツールは、商談の音声から生成された文字起こしテキストファイルに含まれる個人情報（発言者名など）を自動的にマスキングし、元ファイルをbeforeフォルダからafterフォルダに移動してプライバシーを保護します。

## 機能

- **ファイル名のマスキング**: タイムスタンプは保持し、商談タイトル部分をハッシュ値に置換
- **発言者名のマスキング**: テキスト内の発言者名を「[個人名]」に統一
- **フォルダ構造の保持**: サブフォルダ構造を維持してマスキング済みファイルを移動
- **再帰的処理**: beforeフォルダ内の全てのサブフォルダを自動検索・処理

## ディレクトリ構造

```
amptalk-masking/
├── masking_tool.py    # メインツール
├── README.md          # このファイル
├── before/            # 元データ格納フォルダ
│   ├── FS/
│   └── ...
└── after/             # マスキング済みデータ出力フォルダ
    ├── FS/
    └── ...
```

## マスキングルール

### ファイル名のマスキング

**変更前:**
```
20250716-1559_ABC株式会社.txt
20250717-1030_新規プロジェクト打ち合わせ.txt
```

**変更後:**
```
20250716-1559_a1b2c3d4.txt
20250717-1030_e5f6g7h8.txt
```

- タイムスタンプ部分（`YYYYMMDD-HHMM`）は保持
- アンダースコア以降の商談タイトル部分をハッシュ値（MD5の最初の8文字）に置換
- ファイル拡張子（`.txt`）は保持

### テキスト内容のマスキング

**変更前:**
```
00:46 山田 太郎
こんにちは、本日はお忙しい中お時間をいただき、ありがとうございます。

01:23 佐藤 花子
こちらこそ、よろしくお願いいたします。
```

**変更後:**
```
00:46 [個人名]
こんにちは、本日はお忙しい中お時間をいただき、ありがとうございます。

01:23 [個人名]
こちらこそ、よろしくお願いいたします。
```

- 経過時間（`MM:SS`）は保持
- 発言者名部分を「[個人名]」に統一
- 発言内容は変更なし

## 使用方法

### 1. 前準備

beforeフォルダに処理対象のテキストファイルを配置します：

```bash
mkdir -p before/FS
# テキストファイルをbeforeフォルダに配置
```

### 2. ツールの実行

```bash
python masking_tool.py
```

### 3. 結果の確認

afterフォルダにマスキング済みファイルが生成されます：

```bash
ls -la after/
```

## 実行例

```bash
$ python masking_tool.py
商談文字起こしマスキングツールを開始します...
処理対象ファイル数: 3
移動完了: before/FS/20250716-1559_ABC株式会社.txt -> after/FS/20250716-1559_a1b2c3d4.txt
移動完了: before/FS/20250717-1030_新規プロジェクト.txt -> after/FS/20250717-1030_e5f6g7h8.txt
移動完了: before/other/20250718-1400_打ち合わせ.txt -> after/other/20250718-1400_9i0j1k2l.txt
マスキング処理が完了しました
```

## 注意事項

- **文字エンコーディング**: UTF-8形式のテキストファイルを前提としています
- **ファイル形式**: `.txt`拡張子のファイルのみが処理対象です
- **上書き警告**: afterフォルダが既に存在する場合、既存の内容は削除されます
- **ファイル移動**: 元ファイルはbeforeフォルダから削除され、afterフォルダに移動されます
- **バックアップ推奨**: 元ファイルは必ずバックアップを取ってから実行してください

## システム要件

- Python 3.6以上
- 標準ライブラリのみ使用（追加インストール不要）

## エラーハンドリング

- ファイル読み込みエラー時は該当ファイルをスキップし、処理を継続
- beforeフォルダが存在しない場合は警告メッセージを表示
- 処理対象ファイルが見つからない場合は適切なメッセージを表示

## 技術仕様

- **言語**: Python 3
- **依存関係**: 標準ライブラリのみ
- **処理方式**: ファイル単位での逐次処理
- **メモリ効率**: ファイル内容を一時的にメモリに読み込み（大容量ファイルの場合は注意）

## ライセンス

このツールは個人情報保護を目的とした内部使用ツールです。